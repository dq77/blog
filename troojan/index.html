<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/huluobo.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/huluobo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/huluobo.png">
  <link rel="mask-icon" href="/blog/images/huluobo.png" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//static.767766.xyz/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"767766.xyz","root":"/blog/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="准备工作域名购买购买域名选择namesilo  账号 diaoqi 密码 d-  ps: 这有个免费申请域名的网站 没试过好用否  贴在这  购买支付以后，切换域名的DNS服务器">
<meta property="og:type" content="article">
<meta property="og:title" content="Trojan搭建具体流程">
<meta property="og:url" content="https://767766.xyz/blog/troojan/index.html">
<meta property="og:site_name" content="萝卜小站">
<meta property="og:description" content="准备工作域名购买购买域名选择namesilo  账号 diaoqi 密码 d-  ps: 这有个免费申请域名的网站 没试过好用否  贴在这  购买支付以后，切换域名的DNS服务器">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://767766.xyz/blog/troojan/1.png">
<meta property="og:image" content="https://767766.xyz/blog/troojan/2.png">
<meta property="og:image" content="https://767766.xyz/blog/troojan/3.png">
<meta property="og:image" content="https://767766.xyz/blog/troojan/4.png">
<meta property="og:image" content="https://767766.xyz/blog/troojan/5.png">
<meta property="article:published_time" content="2021-04-12T07:07:15.000Z">
<meta property="article:modified_time" content="2024-11-05T02:17:53.169Z">
<meta property="article:author" content="掉漆的标题">
<meta property="article:tag" content="代理">
<meta property="article:tag" content="CentOS">
<meta property="article:tag" content="Ubuntu">
<meta property="article:tag" content="Trojan">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://767766.xyz/blog/troojan/1.png">

<link rel="canonical" href="https://767766.xyz/blog/troojan/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Trojan搭建具体流程 | 萝卜小站</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?24e42885e03a4dd98233c3e192e54dd2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">萝卜小站</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">要做所有萝卜中最胡的一条</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://767766.xyz/blog/troojan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/huluobo.png">
      <meta itemprop="name" content="掉漆的标题">
      <meta itemprop="description" content="这个家伙很懒，什么也没有留下">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萝卜小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Trojan搭建具体流程
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-12 15:07:15" itemprop="dateCreated datePublished" datetime="2021-04-12T15:07:15+08:00">2021-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-11-05 10:17:53" itemprop="dateModified" datetime="2024-11-05T10:17:53+08:00">2024-11-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Trojan/" itemprop="url" rel="index"><span itemprop="name">Trojan</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><h4 id="域名购买"><a href="#域名购买" class="headerlink" title="域名购买"></a>域名购买</h4><p>购买域名选择<a target="_blank" rel="noopener" href="https://www.namesilo.com/">namesilo</a>  账号 diaoqi 密码 d-</p>
<blockquote>
<p>ps: 这有个免费申请域名的网站 没试过好用否  <a target="_blank" rel="noopener" href="https://www.freenom.com/zh/index.html?lang=zh">贴在这</a></p>
</blockquote>
<p>购买支付以后，切换域名的DNS服务器</p>
<span id="more"></span>

<img src="/blog/troojan/1.png" class="" width="600" title="namesilo官网">

<p>首先左侧勾选域名，然后点击上面的 <code>Change Nameservers</code> 按钮。</p>
<p>切换域名服务器至DNSpod：<code>melon.dnspod.net</code> 和 <code>clam.dnspod.net</code></p>
<p>切换后要等大概一小时才能进入下一步</p>
<h4 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h4><p>域名解析选择<a target="_blank" rel="noopener" href="https://www.dnspod.cn/">dnspod</a>  账号 QQ邮箱 密码 d-</p>
<img src="/blog/troojan/2.png" class="" width="600" title="解析结果">

<p>添加域名以后 先加上www的解析 如下图</p>
<img src="/blog/troojan/3.png" class="" width="600" title="第一条解析">

<p>等待解析灯变绿色以后 测试解析结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.domainabcdefg.com</span><br></pre></td></tr></table></figure>

<h4 id="SSL证书选择"><a href="#SSL证书选择" class="headerlink" title="SSL证书选择"></a>SSL证书选择</h4><p>申请SSL证书选择<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/ssl">腾讯云</a>  账号 QQ邮箱 密码 d-</p>
<img src="/blog/troojan/4.png" class="" width="600" title="证书列表 - 腾讯云">

<blockquote>
<p>Trojan代理下的二级域名不能使用HTTPS服务，所以不要给二级域名申请证书</p>
</blockquote>
<p>申请证书的时候选择自动DNS验证，无需手动更改任何东西，一直点下一步，证书颁发后下载Nginx版本即可，本步骤到此即可结束。</p>
<p>另外也可选择手动DNS验证，手动为域名添加一条解析记录，操作如下：</p>
<p>在 “证书列表” 页面，选择待查看证书详情的域名型证书 ID，进入 “证书详情” 页面。如下图所示：</p>
<img src="/blog/troojan/5.png" class="" width="600" title="证书详情">

<p>按操作 去DNSpod那里添加一条TXT类型的解析即可 最终结果可以看上上面的解析图</p>
<p>只要上面的域名解析没问题 这里也没问题 直接等待CA扫描然后颁发证书即可</p>
<p>至此，准备工作结束。</p>
<hr>
<h3 id="搭建服务端"><a href="#搭建服务端" class="headerlink" title="搭建服务端"></a>搭建服务端</h3><p>准备服务器一台，提前重置你钟爱的系统！（CentOS&#x2F;Debian 都可以，但是今天教程做的是 Debian 的，我会把 CentOS 的代码一并贴上）</p>
<p>等待SSL证书生效</p>
<h4 id="安装服务端环境"><a href="#安装服务端环境" class="headerlink" title="安装服务端环境"></a>安装服务端环境</h4><ol>
<li><h5 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update  #Debian 更新</span><br><span class="line">yum update  #CentOS 更新</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="安装-wget"><a href="#安装-wget" class="headerlink" title="安装 wget"></a>安装 wget</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install wget   ##Debian/Ubuntu 安装 wget</span><br><span class="line">yum -y install wget    ##CentOS Yum 安装 wget</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="安装curl"><a href="#安装curl" class="headerlink" title="安装curl"></a>安装curl</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update -y &amp;&amp; apt-get install curl -y    ##Ubuntu/Debian 系统安装 Curl 方法</span><br><span class="line">yum update -y &amp;&amp; yum install curl -y            ##CentOS 系统安装 Curl 方法</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="安装-XZ-压缩工具"><a href="#安装-XZ-压缩工具" class="headerlink" title="安装 XZ 压缩工具"></a>安装 XZ 压缩工具</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install xz-utils   #Debian/Ubuntu 安装 XZ 压缩工具命令</span><br><span class="line">yum install xz    #CentOS 安装 XZ 压缩工具</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="感兴趣的先测一下网速-此步骤可跳过"><a href="#感兴趣的先测一下网速-此步骤可跳过" class="headerlink" title="感兴趣的先测一下网速(此步骤可跳过)"></a>感兴趣的先测一下网速(此步骤可跳过)</h5><p>综合测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- bench.sh | bash</span><br></pre></td></tr></table></figure>
<p>国内三网测速</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Lso- https://git.io/superspeed.sh)</span><br></pre></td></tr></table></figure>
<p>回程路由信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- git.io/autobesttrace | bash</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="安装-NGINX-并自启"><a href="#安装-NGINX-并自启" class="headerlink" title="安装 NGINX 并自启"></a>安装 NGINX 并自启</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt-get -y install  nginx wget unzip zip curl tar   #Debian 安装</span><br><span class="line">yum -y install  nginx wget unzip zip curl tar   #CentOS 安装</span><br><span class="line"> </span><br><span class="line">systemctl enable nginx.service    #设置 Nginx 开机启动</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="配置Nginx"><a href="#配置Nginx" class="headerlink" title="配置Nginx"></a>配置Nginx</h5><p>找到 路径<code>/etc/nginx/nginx.conf</code>替换原有代码，注意 <code>server_name</code> 字段换成你自己的域名</p>
<blockquote>
<p>能看懂的话可以不用替换 改一改配置项也行。看不懂请无脑复制</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        #不带www的入口</span><br><span class="line">        server_name domain.com;</span><br><span class="line">        return 301 http://www.domain.com$request_uri;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root /usr/share/nginx/html;</span><br><span class="line">            index index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name www.domain.com;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root /usr/share/nginx/html;</span><br><span class="line">            index index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        location /m &#123;</span><br><span class="line">            alias /usr/share/nginx/reactapp;</span><br><span class="line">            index index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        location /api &#123;</span><br><span class="line">            proxy_pass http://103.111.11.1:8081;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="设置常规站点"><a href="#设置常规站点" class="headerlink" title="设置常规站点"></a>设置常规站点</h5><blockquote>
<p>也可以先用自己的网站文件，不用他们官方的。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /usr/share/nginx/html/*   #删除目录原有文件</span><br><span class="line">cd /usr/share/nginx/html/    #进入站点根目录</span><br><span class="line">wget https://github.com/V2RaySSR/Trojan/raw/master/web.zip   #下载官方站点</span><br><span class="line">unzip web.zip</span><br><span class="line">systemctl restart nginx.service   #重启nginx</span><br></pre></td></tr></table></figure>

<p>到这里，你访问 <code>http://你的域名</code> ，应该可以打开网站了，如果没打开接着往下设置。<strong>（不是 <code>https://</code>）</strong></p>
</li>
<li><h5 id="问题排查"><a href="#问题排查" class="headerlink" title="问题排查"></a>问题排查</h5><p>如果域名和IP地址都打不开，可能是防火墙的原因，首先查看防火墙状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure>

<p>如果有绿色证明开启了防火墙，然后查看已经开放的端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>

<p>启动防火墙后默认是不开启任何端口的，所以查到的应该是空</p>
<p>然后打开80端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br></pre></td></tr></table></figure>

<p>顺便443也打开</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=443/tcp --permanent</span><br></pre></td></tr></table></figure>

<p>其中命令含义：  </p>
<ul>
<li><code>--zone</code> #作用域 </li>
<li><code>--add-port=80/tcp</code> #添加端口，格式为：端口&#x2F;通讯协议  </li>
<li><code>--permanent</code> #永久生效，没有此参数重启后失效</li>
</ul>
<p>开放后重启防火墙生效</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<p>成功后再往下一步走，此处没成功则排查问题。</p>
</li>
<li><h5 id="下载Trojan服务器"><a href="#下载Trojan服务器" class="headerlink" title="下载Trojan服务器"></a>下载Trojan服务器</h5><p>下载地址：<a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/trojan/releases/download/v1.16.0/trojan-1.16.0-linux-amd64.tar.xz">https://github.com/trojan-gfw/trojan/releases/download/v1.16.0/trojan-1.16.0-linux-amd64.tar.xz</a></p>
<blockquote>
<p>既可以在github下载后拖入服务器，也可在服务器上下载。都一样。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/src  #进入该目录</span><br><span class="line">wget https://github.com/trojan-gfw/trojan/releases/download/v1.16.0/trojan-1.16.0-linux-amd64.tar.xz    #下载官方 Trojan 服务器</span><br><span class="line">tar xf trojan-1.*   #解压该文件</span><br></pre></td></tr></table></figure>

<blockquote>
<p>国内备份：<a target="_blank" rel="noopener" href="https://ghp.ci/https://github.com/trojan-gfw/trojan/releases/download/v1.16.0/trojan-1.16.0-linux-amd64.tar.xz">trojan-1.16.0-linux-amd64.tar.xz</a></p>
</blockquote>
</li>
<li><h5 id="创建-Trojan-服务器配置文件"><a href="#创建-Trojan-服务器配置文件" class="headerlink" title="创建 Trojan 服务器配置文件"></a>创建 Trojan 服务器配置文件</h5><p>找到 <code>/usr/src/trojan/</code> 目录，创建并打开<code>server.conf</code>文件</p>
<blockquote>
<p>ubuntu下创建命令为：touch server.conf</p>
</blockquote>
<p>创建后，写入以下内容。 <strong>注意！</strong> 下图中的配置项 password 字段记得改了 其他配置项如果能看懂 也可以改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;run_type&quot;: &quot;server&quot;,</span><br><span class="line">    &quot;local_addr&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;local_port&quot;: 443,</span><br><span class="line">    &quot;remote_addr&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;remote_port&quot;: 80,</span><br><span class="line">    &quot;password&quot;: [</span><br><span class="line">        &quot;00000000&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;log_level&quot;: 1,</span><br><span class="line">    &quot;ssl&quot;: &#123;</span><br><span class="line">        &quot;cert&quot;: &quot;/usr/src/trojan-cert/fullchain.crt&quot;,</span><br><span class="line">        &quot;key&quot;: &quot;/usr/src/trojan-cert/private.key&quot;,</span><br><span class="line">        &quot;key_password&quot;: &quot;&quot;,</span><br><span class="line">        &quot;cipher&quot;: &quot;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384&quot;,</span><br><span class="line">        &quot;cipher_tls13&quot;: &quot;TLS_AES_128_GCM_SHA256:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_256_GCM_SHA384&quot;,</span><br><span class="line">        &quot;prefer_server_cipher&quot;: true,</span><br><span class="line">        &quot;alpn&quot;: [</span><br><span class="line">            &quot;http/1.1&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;alpn_port_override&quot;: &#123;</span><br><span class="line">            &quot;h2&quot;: 81</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;reuse_session&quot;: true,</span><br><span class="line">        &quot;session_ticket&quot;: false,</span><br><span class="line">        &quot;session_timeout&quot;: 600,</span><br><span class="line">        &quot;plain_http_response&quot;: &quot;&quot;,</span><br><span class="line">        &quot;curves&quot;: &quot;&quot;,</span><br><span class="line">        &quot;dhparam&quot;: &quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;tcp&quot;: &#123;</span><br><span class="line">        &quot;prefer_ipv4&quot;: false,</span><br><span class="line">        &quot;no_delay&quot;: true,</span><br><span class="line">        &quot;keep_alive&quot;: true,</span><br><span class="line">        &quot;reuse_port&quot;: false,</span><br><span class="line">        &quot;fast_open&quot;: false,</span><br><span class="line">        &quot;fast_open_qlen&quot;: 20</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;mysql&quot;: &#123;</span><br><span class="line">        &quot;enabled&quot;: false,</span><br><span class="line">        &quot;server_addr&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">        &quot;server_port&quot;: 3306,</span><br><span class="line">        &quot;database&quot;: &quot;trojan&quot;,</span><br><span class="line">        &quot;username&quot;: &quot;trojan&quot;,</span><br><span class="line">        &quot;password&quot;: &quot;&quot;,</span><br><span class="line">        &quot;key&quot;: &quot;&quot;,</span><br><span class="line">        &quot;cert&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ca&quot;: &quot;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="创建-Trojan-自启服务"><a href="#创建-Trojan-自启服务" class="headerlink" title="创建 Trojan 自启服务"></a>创建 Trojan 自启服务</h5><p>Debian 系统找到 <code>/lib/systemd/system/</code> 目录，并创建 <code>trojan.service</code> 文件<br>CentOS 系统找到 <code>/usr/lib/systemd/system/</code> 目录，并创建 <code>trojan.service</code> 文件<br>打开 <code>trojan.service</code> 文件，并写入以下代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]  </span><br><span class="line">Description=trojan  </span><br><span class="line">After=network.target  </span><br><span class="line">   </span><br><span class="line">[Service]  </span><br><span class="line">Type=simple  </span><br><span class="line">PIDFile=/usr/src/trojan/trojan/trojan.pid</span><br><span class="line">ExecStart=/usr/src/trojan/trojan -c &quot;/usr/src/trojan/server.conf&quot;  </span><br><span class="line">ExecReload=  </span><br><span class="line">ExecStop=/usr/src/trojan/trojan  </span><br><span class="line">PrivateTmp=true  </span><br><span class="line">   </span><br><span class="line">[Install]  </span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="下载并解压证书"><a href="#下载并解压证书" class="headerlink" title="下载并解压证书"></a>下载并解压证书</h5><p>下载后解压，然后打开 nginx目录，里面有俩文件</p>
<ul>
<li>一个是 <code>xxx.xxx.xxx_chain.crt</code> 文件</li>
<li>一个是 <code>xxx.xxx.xxx_key.key</code> 文件</li>
</ul>
<p>把 <code>xxx.xxx.xxx_chain.crt</code> 改名为 <code>fullchain.crt</code> 备用<br>把 <code>xxx.xxx.xxx_key.key</code> 改名为 <code>private.key</code> 备用</p>
</li>
<li><h5 id="移动证书文件"><a href="#移动证书文件" class="headerlink" title="移动证书文件"></a>移动证书文件</h5><p>创建存放证书的文件夹<code>trojan-cert</code> 完整路径为 <code>/usr/src/trojan-cert</code><br>把刚才改名的 2 个文件（ <code>fullchain.crt</code> 和 <code>private.key</code> ）放到服务器 <code>/usr/src/trojan-cert</code> 目录下面</p>
</li>
</ol>
<h4 id="启动Trojan服务"><a href="#启动Trojan服务" class="headerlink" title="启动Trojan服务"></a>启动Trojan服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start trojan.service  #启动 Trojan</span><br><span class="line">systemctl enable trojan.service  #设置 Trojan 服务开机自启</span><br></pre></td></tr></table></figure>

<h4 id="验证-SSL-证书"><a href="#验证-SSL-证书" class="headerlink" title="验证 SSL 证书"></a>验证 SSL 证书</h4><p>访问 <code>https://你的域名</code> ，检查证书和 Trojan 是否正常运行（有小锁成功）。</p>
<p>记得是访问 <code>https://</code> 。不是 <code>http://</code></p>
<p>至此，服务端搭建结束。</p>
<hr>
<h3 id="Trojan-客户端下载"><a href="#Trojan-客户端下载" class="headerlink" title="Trojan 客户端下载"></a>Trojan 客户端下载</h3><p>现在的客户端大多是订阅模式，直接使用代理的反而比较少。建议学习各平台的订阅配置文件规则集。</p>
<ul>
<li><h4 id="Windows客户端"><a href="#Windows客户端" class="headerlink" title="Windows客户端"></a>Windows客户端</h4><ul>
<li><h5 id="V2rayN"><a href="#V2rayN" class="headerlink" title="V2rayN"></a>V2rayN</h5><p>新手推荐<a target="_blank" rel="noopener" href="https://ghp.ci/https://github.com/2dust/v2rayN/releases/download/6.60/v2rayN-With-Core.zip">V2rayN</a> ，是一个基于 <code>V2Ray</code> 及 <code>Xray</code> 内核的 Windows 客户端。缺点就是只支持Windows系统。</p>
<blockquote>
<p>目前只建议新手使用这一个客户端。</p>
</blockquote>
<p>使用方式：</p>
<ol>
<li>下载后解压，打开程序。点击左上角服务器，添加[Trojan]服务器。</li>
<li>别名填Trojan，地址输入Trojan服务器的域名，如 <code>www.domain.com</code>。</li>
<li>端口443，密码填Trojan 服务器配置文件中的密码。点击确定。</li>
<li>选中刚添加的服务器，右键，设为活动服务器。</li>
<li>软件下方系统代理选择<code>自动配置系统代理</code>，路由选择<code>V3-全局(Global)</code>，即可打开谷歌。</li>
</ol>
</li>
<li><h5 id="Clash-Verge"><a href="#Clash-Verge" class="headerlink" title="Clash Verge"></a>Clash Verge</h5><p>点击访问 <a target="_blank" rel="noopener" href="https://www.clashverge.dev/install.html#__tabbed_1_1">官方网站</a>，客户端 <a target="_blank" rel="noopener" href="https://ghp.ci/https://github.com/clash-verge-rev/clash-verge-rev/releases/download/v1.7.7/Clash.Verge_1.7.7_x64-setup.exe">下载地址</a>。别忘了 <a target="_blank" rel="noopener" href="https://gitee.com/diaoqi/blog-source/releases/download/v1.0.1/attach_file_1934770">下载使用说明书</a> 。Trojan类型的Clash订阅文件格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">proxies:</span><br><span class="line">  - name: 美国节点</span><br><span class="line">    server: www.domain.com</span><br><span class="line">    port: 443</span><br><span class="line">    type: trojan</span><br><span class="line">    password: 00000000</span><br></pre></td></tr></table></figure>


</li>
<li><h5 id="GUI-for-SingBox"><a href="#GUI-for-SingBox" class="headerlink" title="GUI.for.SingBox"></a>GUI.for.SingBox</h5><p>Sing–Box支持众多协议，需要自己配置订阅链接。</p>
<p>下载地址：<a target="_blank" rel="noopener" href="https://ghp.ci/https://github.com/GUI-for-Cores/GUI.for.SingBox/releases/download/v1.8.8/GUI.for.SingBox-windows-386.zip">GUI.for.SingBox</a></p>
</li>
<li><h5 id="西部世界"><a href="#西部世界" class="headerlink" title="西部世界"></a>西部世界</h5><p>一个机场整理的客户端：<a target="_blank" rel="noopener" href="https://westworldss.com/">西部世界官网</a>，进网站后点击客户端下载。</p>
<blockquote>
<p>国内备份：<a target="_blank" rel="noopener" href="https://sjssr.fun/portal/account/login">西部世界官网</a><br>如果进不去，可以发送任意内容至邮箱 <a href="mailto:&#105;&#x6e;&#102;&#x6f;&#64;&#x77;&#x65;&#x73;&#x74;&#119;&#111;&#114;&#108;&#100;&#x73;&#x73;&#46;&#x63;&#111;&#x6d;">&#105;&#x6e;&#102;&#x6f;&#64;&#x77;&#x65;&#x73;&#x74;&#119;&#111;&#114;&#108;&#100;&#x73;&#x73;&#46;&#x63;&#111;&#x6d;</a> 即可获取最新地址</p>
</blockquote>
</li>
<li><h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><p>其他的好用客户端，都在 <a target="_blank" rel="noopener" href="https://v2rayssr.com/vpn-client.html">这里</a>。</p>
</li>
</ul>
</li>
<li><h4 id="macOS客户端"><a href="#macOS客户端" class="headerlink" title="macOS客户端"></a>macOS客户端</h4><ul>
<li><h5 id="Clash-Verge-1"><a href="#Clash-Verge-1" class="headerlink" title="Clash Verge"></a>Clash Verge</h5><p>在Mac上运行的clash Verge，使用说明以及下载地址请参考<a target="_blank" rel="noopener" href="https://www.clashverge.dev/install.html#__tabbed_1_3">官网</a>，也是需要配置订阅文件。</p>
</li>
<li><h5 id="Qv2ray"><a href="#Qv2ray" class="headerlink" title="Qv2ray"></a>Qv2ray</h5><p>可用但不推荐，<a target="_blank" rel="noopener" href="https://github.com/Qv2ray/Qv2ray/releases">Qv2ray</a>的复杂配置在Mac端有些不方便。适合熟悉Qv2ray的配置方式或者用惯Qv2ray的人使用。</p>
</li>
</ul>
</li>
<li><h4 id="安卓客户端"><a href="#安卓客户端" class="headerlink" title="安卓客户端"></a>安卓客户端</h4><ul>
<li><h5 id="igniter"><a href="#igniter" class="headerlink" title="igniter"></a>igniter</h5></li>
</ul>
<p>  这个是官方的原版安卓客户端 <a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/igniter/releases">igniter</a>，可放心使用。</p>
<blockquote>
<p>国内备份：<a target="_blank" rel="noopener" href="https://ghp.ci/https://github.com/trojan-gfw/igniter/releases/download/v0.10.2-beta/io.github.trojan_gfw.igniter-v0.10.2-beta-230001002-arm64-v8a-release.apk">igniter</a></p>
</blockquote>
<ul>
<li><h5 id="Clash-Meta"><a href="#Clash-Meta" class="headerlink" title="Clash Meta"></a>Clash Meta</h5></li>
</ul>
<p>  需要先把配置文件弄好，手机下载 <a target="_blank" rel="noopener" href="https://ghp.ci/https://github.com/MetaCubeX/ClashMetaForAndroid/releases/download/v2.10.1/cmfa-2.10.1-meta-universal-release.apk">Clash Meta</a>，然后导入URL或者文件即可使用。</p>
</li>
<li><h4 id="IOS客户端"><a href="#IOS客户端" class="headerlink" title="IOS客户端"></a>IOS客户端</h4><ul>
<li><h5 id="William-VPN"><a href="#William-VPN" class="headerlink" title="William VPN"></a>William VPN</h5></li>
</ul>
<p>  用美区Apple ID登录AppStore，搜索 William VPN。</p>
<blockquote>
<p>本人未尝试过，无教程，盲猜和安卓差不多</p>
</blockquote>
</li>
<li><h4 id="Linux客户端"><a href="#Linux客户端" class="headerlink" title="Linux客户端"></a>Linux客户端</h4><ul>
<li><h5 id="Qv2ray-1"><a href="#Qv2ray-1" class="headerlink" title="Qv2ray"></a>Qv2ray</h5></li>
</ul>
<p>  支持Linux的客户端不多，<a target="_blank" rel="noopener" href="https://github.com/Qv2ray/Qv2ray/releases">Qv2ray</a>算是最好用的之一，具体配置方式同Windows。
  </p>
</li>
<li><h4 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h4><ul>
<li><h5 id="梅林路由器"><a href="#梅林路由器" class="headerlink" title="梅林路由器"></a>梅林路由器</h5></li>
</ul>
<p>  支持RT-AC86U 官改固件，Trojan 暂时没有可用的路由器插件。</p>
<ul>
<li><h5 id="OpenWRT路由器"><a href="#OpenWRT路由器" class="headerlink" title="OpenWRT路由器"></a>OpenWRT路由器</h5></li>
</ul>
<p>  支持NanoPi R2S 软路由，刷入固件FriendlyWrt_20200616_NanoPi-R2S_arm64_sd.img。</p>
</li>
</ul>
<p>由于很多客户端更新频繁，跑路的跑路，喝茶的喝茶，故本文客户端不做可用性保证，建议上网查询更好用的客户端。很多链接不存在国内备份，而国外链接在国内又打不开。故建议先搭建Windows环境客户端，成功后再访问其他链接。</p>
<p>至此，客户端搭建完毕，开始你的表演。</p>
<hr>
<h3 id="开启BBR加速服务（选修）"><a href="#开启BBR加速服务（选修）" class="headerlink" title="开启BBR加速服务（选修）"></a>开启BBR加速服务（选修）</h3><p>大家都知道国外的服务器远离我们，在国内连接速度并不是很好，尤其是在晚高峰期体验效果明显有所下降，此时我们需要安装一些脚本进行加速。</p>
<p>前段时间 Google 开源了 TCP BBR 拥塞控制算法，根据用户使用体验的效果来看在 服务器上开启了 TCP BBR 后网速最高可达到 10 几倍的提升。</p>
<p>关于 Google BBR 拥塞控制算法目前有很多个版本，一个原版，另一个为魔改版，还有加强版的 BBRPLUS 版本。魔改版 Google BBR 和 PLUS 版本的 BBR 是在原版的基础上调整了一些参数，加速效果更胜一筹。</p>
<p>原版的 BBR 稳定，和系统兼容性好，长期运行不容易出现错误。但是其他衍生来的一些 BBR 加速版本，是经过原版的优化和改动，所以我们都不能说他是 100%的。所以这边我们建议大家不要在你的生产系统上面折腾第三方的加速软件。</p>
<h4 id="Google-原版-BBR-安装"><a href="#Google-原版-BBR-安装" class="headerlink" title="Google 原版 BBR 安装"></a>Google 原版 BBR 安装</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh</span><br><span class="line">chmod 755 bbr.sh &amp;&amp; ./bbr.sh</span><br></pre></td></tr></table></figure>

<p>接下来 BBR 会自动开始安装，中间提示的什么 就按默认选择就好。</p>
<p>安装完成后会英文提示是否重启，输入 y 回车重启。</p>
<p>等待大概一分钟，系统重启成功后，重新用连接工具连接服务器，输入以下命令验证 BBR 是否安装成功：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br></pre></td></tr></table></figure>

<p>如果得到如下结果则代表 BBR 安装成功：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_congestion_control = bbr</span><br></pre></td></tr></table></figure>

<p>安装成功后，不需要启动什么。这就完事儿了。</p>
<p>（全文完）</p>
<p>————————————————</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>掉漆的标题
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://767766.xyz/blog/troojan/" title="Trojan搭建具体流程">https://767766.xyz/blog/troojan/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/blog/tags/%E4%BB%A3%E7%90%86/" rel="tag"><i class="fa fa-tag"></i> 代理</a>
              <a href="/blog/tags/CentOS/" rel="tag"><i class="fa fa-tag"></i> CentOS</a>
              <a href="/blog/tags/Ubuntu/" rel="tag"><i class="fa fa-tag"></i> Ubuntu</a>
              <a href="/blog/tags/Trojan/" rel="tag"><i class="fa fa-tag"></i> Trojan</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/jpsms/" rel="prev" title="键盘使用说明书">
      <i class="fa fa-chevron-left"></i> 键盘使用说明书
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/typora/" rel="next" title="Typora安装方式及快捷键整理">
      Typora安装方式及快捷键整理 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.</span> <span class="nav-text">准备工作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E8%B4%AD%E4%B9%B0"><span class="nav-number">1.1.</span> <span class="nav-text">域名购买</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90"><span class="nav-number">1.2.</span> <span class="nav-text">域名解析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SSL%E8%AF%81%E4%B9%A6%E9%80%89%E6%8B%A9"><span class="nav-number">1.3.</span> <span class="nav-text">SSL证书选择</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%AD%E5%BB%BA%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="nav-number">2.</span> <span class="nav-text">搭建服务端</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%8E%AF%E5%A2%83"><span class="nav-number">2.1.</span> <span class="nav-text">安装服务端环境</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0"><span class="nav-number">2.1.1.</span> <span class="nav-text">更新</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-wget"><span class="nav-number">2.1.2.</span> <span class="nav-text">安装 wget</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85curl"><span class="nav-number">2.1.3.</span> <span class="nav-text">安装curl</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-XZ-%E5%8E%8B%E7%BC%A9%E5%B7%A5%E5%85%B7"><span class="nav-number">2.1.4.</span> <span class="nav-text">安装 XZ 压缩工具</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%84%9F%E5%85%B4%E8%B6%A3%E7%9A%84%E5%85%88%E6%B5%8B%E4%B8%80%E4%B8%8B%E7%BD%91%E9%80%9F-%E6%AD%A4%E6%AD%A5%E9%AA%A4%E5%8F%AF%E8%B7%B3%E8%BF%87"><span class="nav-number">2.1.5.</span> <span class="nav-text">感兴趣的先测一下网速(此步骤可跳过)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-NGINX-%E5%B9%B6%E8%87%AA%E5%90%AF"><span class="nav-number">2.1.6.</span> <span class="nav-text">安装 NGINX 并自启</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%85%8D%E7%BD%AENginx"><span class="nav-number">2.1.7.</span> <span class="nav-text">配置Nginx</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%B8%B8%E8%A7%84%E7%AB%99%E7%82%B9"><span class="nav-number">2.1.8.</span> <span class="nav-text">设置常规站点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5"><span class="nav-number">2.1.9.</span> <span class="nav-text">问题排查</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BDTrojan%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">2.1.10.</span> <span class="nav-text">下载Trojan服务器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Trojan-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.1.11.</span> <span class="nav-text">创建 Trojan 服务器配置文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Trojan-%E8%87%AA%E5%90%AF%E6%9C%8D%E5%8A%A1"><span class="nav-number">2.1.12.</span> <span class="nav-text">创建 Trojan 自启服务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E8%A7%A3%E5%8E%8B%E8%AF%81%E4%B9%A6"><span class="nav-number">2.1.13.</span> <span class="nav-text">下载并解压证书</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A7%BB%E5%8A%A8%E8%AF%81%E4%B9%A6%E6%96%87%E4%BB%B6"><span class="nav-number">2.1.14.</span> <span class="nav-text">移动证书文件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8Trojan%E6%9C%8D%E5%8A%A1"><span class="nav-number">2.2.</span> <span class="nav-text">启动Trojan服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81-SSL-%E8%AF%81%E4%B9%A6"><span class="nav-number">2.3.</span> <span class="nav-text">验证 SSL 证书</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Trojan-%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8B%E8%BD%BD"><span class="nav-number">3.</span> <span class="nav-text">Trojan 客户端下载</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Windows%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">3.1.</span> <span class="nav-text">Windows客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#V2rayN"><span class="nav-number">3.1.1.</span> <span class="nav-text">V2rayN</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Clash-Verge"><span class="nav-number">3.1.2.</span> <span class="nav-text">Clash Verge</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#GUI-for-SingBox"><span class="nav-number">3.1.3.</span> <span class="nav-text">GUI.for.SingBox</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A5%BF%E9%83%A8%E4%B8%96%E7%95%8C"><span class="nav-number">3.1.4.</span> <span class="nav-text">西部世界</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="nav-number">3.1.5.</span> <span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#macOS%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">3.2.</span> <span class="nav-text">macOS客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Clash-Verge-1"><span class="nav-number">3.2.1.</span> <span class="nav-text">Clash Verge</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Qv2ray"><span class="nav-number">3.2.2.</span> <span class="nav-text">Qv2ray</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">3.3.</span> <span class="nav-text">安卓客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#igniter"><span class="nav-number">3.3.1.</span> <span class="nav-text">igniter</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Clash-Meta"><span class="nav-number">3.3.2.</span> <span class="nav-text">Clash Meta</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOS%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">3.4.</span> <span class="nav-text">IOS客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#William-VPN"><span class="nav-number">3.4.1.</span> <span class="nav-text">William VPN</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">3.5.</span> <span class="nav-text">Linux客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Qv2ray-1"><span class="nav-number">3.5.1.</span> <span class="nav-text">Qv2ray</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="nav-number">3.6.</span> <span class="nav-text">路由器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A2%85%E6%9E%97%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="nav-number">3.6.1.</span> <span class="nav-text">梅林路由器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#OpenWRT%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="nav-number">3.6.2.</span> <span class="nav-text">OpenWRT路由器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%90%AFBBR%E5%8A%A0%E9%80%9F%E6%9C%8D%E5%8A%A1%EF%BC%88%E9%80%89%E4%BF%AE%EF%BC%89"><span class="nav-number">4.</span> <span class="nav-text">开启BBR加速服务（选修）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Google-%E5%8E%9F%E7%89%88-BBR-%E5%AE%89%E8%A3%85"><span class="nav-number">4.1.</span> <span class="nav-text">Google 原版 BBR 安装</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="掉漆的标题"
      src="/blog/images/huluobo.png">
  <p class="site-author-name" itemprop="name">掉漆的标题</p>
  <div class="site-description" itemprop="description">这个家伙很懒，什么也没有留下</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/dq77" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;dq77" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:diaoqi7@gmail.com" title="E-Mail → mailto:diaoqi7@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://x.com/qdtho" title="Twitter → https:&#x2F;&#x2F;x.com&#x2F;qdtho" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.767766.xyz/" title="Home → https:&#x2F;&#x2F;www.767766.xyz" rel="noopener" target="_blank"><i class="fa fa-home fa-fw"></i>Home</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">掉漆的标题</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="//static.767766.xyz/jquery.min.js"></script>
  <script src="//static.767766.xyz/jquery.fancybox.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  

</body>
</html>
